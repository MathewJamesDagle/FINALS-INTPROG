{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/pc/Desktop/money/adoption-main/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { first } from 'rxjs/operators';\nlet RequestsListComponent = class RequestsListComponent {\n  requestService;\n  petService;\n  accountService;\n  requests = [];\n  constructor(requestService, petService, accountService) {\n    this.requestService = requestService;\n    this.petService = petService;\n    this.accountService = accountService;\n  }\n  ngOnInit() {\n    this.loadRequests();\n  }\n  loadRequests() {\n    var _this = this;\n    this.requestService.getAllRequests().subscribe( /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator(function* (requests) {\n        for (let request of requests) {\n          try {\n            const pet = yield _this.petService.getById(request.petId).toPromise();\n            request.pet = pet;\n            const user = yield _this.accountService.getById(request.accountId).toPromise();\n            request.user = user;\n          } catch (error) {\n            console.error('Error fetching details:', error);\n          }\n        }\n        _this.requests = requests;\n      });\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }(), error => {\n      console.error('Error fetching requests:', error);\n    });\n  }\n  updateStatus(request) {\n    this.requestService.updateRequestStatus(request.id, request.status).pipe(first()).subscribe(() => {\n      console.log('Status updated successfully');\n    }, error => {\n      console.error('Error updating status:', error);\n    });\n  }\n  deleteRequest(id) {\n    this.requestService.deleteRequest(id).pipe(first()).subscribe(() => {\n      this.requests = this.requests.filter(request => request.id !== id);\n    });\n  }\n};\nRequestsListComponent = __decorate([Component({\n  templateUrl: 'requests-list.component.html'\n})], RequestsListComponent);\nexport { RequestsListComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}