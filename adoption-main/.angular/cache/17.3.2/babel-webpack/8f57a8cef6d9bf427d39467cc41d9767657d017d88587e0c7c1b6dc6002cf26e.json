{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport { first } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@app/_services\";\nimport * as i4 from \"@app/_services/rating.service\";\nimport * as i5 from \"@angular/common\";\nconst _c0 = a0 => ({\n  \"add-mode\": a0\n});\nexport let RatingComponent = /*#__PURE__*/(() => {\n  class RatingComponent {\n    formBuilder;\n    router;\n    route;\n    alertService;\n    ratingService;\n    form;\n    loading = false;\n    submitted = false;\n    isAddMode;\n    constructor(formBuilder, router, route, alertService, ratingService // Inject RatingService\n    ) {\n      this.formBuilder = formBuilder;\n      this.router = router;\n      this.route = route;\n      this.alertService = alertService;\n      this.ratingService = ratingService;\n    }\n    ngOnInit() {\n      this.isAddMode = true; // Set to true when adding a new review\n      this.form = this.formBuilder.group({\n        name: ['', Validators.required],\n        message: ['', Validators.required],\n        rating: ['', Validators.required]\n      });\n    }\n    // Convenience getter for easy access to form fields\n    get f() {\n      return this.form.controls;\n    }\n    onSubmit() {\n      this.submitted = true;\n      // Reset alerts on submit\n      this.alertService.clear();\n      // Stop here if form is invalid\n      if (this.form.invalid) {\n        return;\n      }\n      this.loading = true;\n      if (this.isAddMode) {\n        this.createRating();\n      } else {\n        // Update rating logic can be added here if needed\n      }\n    }\n    createRating() {\n      this.ratingService.create(this.form.value).pipe(first()).subscribe({\n        next: () => {\n          this.alertService.success('Review submitted successfully', {\n            keepAfterRouteChange: true\n          });\n          this.router.navigate(['/']); // Navigate to desired route after successful submission\n        },\n        error: error => {\n          this.alertService.error(error);\n          this.loading = false;\n        }\n      });\n    }\n    selectStar(starValue) {\n      for (let i = starValue; i <= 5; i--) {\n        const starInput = document.getElementById(`star${i}`);\n        starInput.checked = true;\n      }\n    }\n    static ɵfac = function RatingComponent_Factory(t) {\n      return new (t || RatingComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i3.AlertService), i0.ɵɵdirectiveInject(i4.RatingService));\n    };\n    static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: RatingComponent,\n      selectors: [[\"ng-component\"]],\n      decls: 40,\n      vars: 5,\n      consts: [[\"lang\", \"en\"], [\"charset\", \"UTF-8\"], [\"name\", \"viewport\", \"content\", \"width=device-width, initial-scale=1.0\"], [1, \"container\"], [1, \"review-form\"], [3, \"ngSubmit\", \"formGroup\", \"ngClass\"], [\"for\", \"user-name\"], [\"type\", \"text\", \"id\", \"user-name\", \"formControlName\", \"name\", \"placeholder\", \"Enter your name\"], [\"for\", \"review-comment\"], [\"id\", \"review-comment\", \"formControlName\", \"message\", \"rows\", \"4\", \"cols\", \"50\", \"placeholder\", \"Write your review here...\"], [1, \"star-rating\"], [\"type\", \"radio\", \"id\", \"star5\", \"name\", \"rating\", \"formControlName\", \"rating\", \"value\", \"5\", 3, \"click\"], [\"for\", \"star5\"], [\"type\", \"radio\", \"id\", \"star4\", \"name\", \"rating\", \"formControlName\", \"rating\", \"value\", \"4\", 3, \"click\"], [\"for\", \"star4\"], [\"type\", \"radio\", \"id\", \"star3\", \"name\", \"rating\", \"formControlName\", \"rating\", \"value\", \"3\", 3, \"click\"], [\"for\", \"star3\"], [\"type\", \"radio\", \"id\", \"star2\", \"name\", \"rating\", \"formControlName\", \"rating\", \"value\", \"2\", 3, \"click\"], [\"for\", \"star2\"], [\"type\", \"radio\", \"id\", \"star1\", \"name\", \"rating\", \"formControlName\", \"rating\", \"value\", \"1\", 3, \"click\"], [\"for\", \"star1\"], [\"type\", \"submit\", 3, \"disabled\"]],\n      template: function RatingComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"html\", 0)(1, \"head\");\n          i0.ɵɵelement(2, \"meta\", 1)(3, \"meta\", 2);\n          i0.ɵɵelementStart(4, \"title\");\n          i0.ɵɵtext(5, \"Adoption Reviews\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(6, \"body\")(7, \"div\", 3)(8, \"h1\");\n          i0.ɵɵtext(9, \"Adoption Reviews\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(10, \"div\", 4)(11, \"h2\");\n          i0.ɵɵtext(12, \"Add your review:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(13, \"form\", 5);\n          i0.ɵɵlistener(\"ngSubmit\", function RatingComponent_Template_form_ngSubmit_13_listener() {\n            return ctx.onSubmit();\n          });\n          i0.ɵɵelementStart(14, \"div\")(15, \"label\", 6);\n          i0.ɵɵtext(16, \"Your Name:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(17, \"input\", 7);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(18, \"div\")(19, \"label\", 8);\n          i0.ɵɵtext(20, \"Your Review:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(21, \"textarea\", 9);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(22, \"div\", 10)(23, \"input\", 11);\n          i0.ɵɵlistener(\"click\", function RatingComponent_Template_input_click_23_listener() {\n            return ctx.selectStar(5);\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(24, \"label\", 12);\n          i0.ɵɵtext(25, \"\\u2605\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(26, \"input\", 13);\n          i0.ɵɵlistener(\"click\", function RatingComponent_Template_input_click_26_listener() {\n            return ctx.selectStar(4);\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(27, \"label\", 14);\n          i0.ɵɵtext(28, \"\\u2605\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(29, \"input\", 15);\n          i0.ɵɵlistener(\"click\", function RatingComponent_Template_input_click_29_listener() {\n            return ctx.selectStar(3);\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(30, \"label\", 16);\n          i0.ɵɵtext(31, \"\\u2605\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(32, \"input\", 17);\n          i0.ɵɵlistener(\"click\", function RatingComponent_Template_input_click_32_listener() {\n            return ctx.selectStar(2);\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(33, \"label\", 18);\n          i0.ɵɵtext(34, \"\\u2605\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(35, \"input\", 19);\n          i0.ɵɵlistener(\"click\", function RatingComponent_Template_input_click_35_listener() {\n            return ctx.selectStar(1);\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(36, \"label\", 20);\n          i0.ɵɵtext(37, \"\\u2605\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(38, \"button\", 21);\n          i0.ɵɵtext(39, \"Submit Review\");\n          i0.ɵɵelementEnd()()()()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(13);\n          i0.ɵɵproperty(\"formGroup\", ctx.form)(\"ngClass\", i0.ɵɵpureFunction1(3, _c0, ctx.isAddMode));\n          i0.ɵɵadvance(25);\n          i0.ɵɵproperty(\"disabled\", ctx.loading);\n        }\n      },\n      dependencies: [i5.NgClass, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.RadioControlValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName],\n      styles: [\"body[_ngcontent-%COMP%]{font-family:Arial,sans-serif;margin:0;padding:0;background-color:#f9f9f9}.container[_ngcontent-%COMP%]{width:80%;margin:20px auto;padding:20px;background-color:#fff;box-shadow:0 0 10px #0000001a;border-radius:8px}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]{color:#333;text-align:center}.review-form[_ngcontent-%COMP%], .reviews[_ngcontent-%COMP%]{margin-top:20px}.review-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .reviews[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5em;color:#444}label[_ngcontent-%COMP%]{display:block;margin:10px 0 5px}input[type=text][_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:100%;padding:10px;margin-bottom:10px;border:1px solid #ccc;border-radius:4px}.star-rating[_ngcontent-%COMP%]{display:flex}.star-rating[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{display:none}.star-rating[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:2em;color:#ccc;cursor:pointer}.star-rating[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]{color:#fc0}button[_ngcontent-%COMP%]{display:block;width:100%;padding:10px;background-color:#28a745;color:#fff;border:none;border-radius:4px;font-size:1em;cursor:pointer}button[_ngcontent-%COMP%]:hover{background-color:#218838}.reviews[_ngcontent-%COMP%]   .review[_ngcontent-%COMP%]{margin-top:10px;padding:10px;border-bottom:1px solid #eee}.reviews[_ngcontent-%COMP%]   .review[_ngcontent-%COMP%]:last-child{border-bottom:none}.review-box[_ngcontent-%COMP%]{background-color:#f0f0f0;padding:10px;border-radius:4px}.review-box[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;font-size:1.2em;color:#333}.review-box[_ngcontent-%COMP%]   .stars[_ngcontent-%COMP%]{margin:5px 0}.review-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0 0}\"]\n    });\n  }\n  return RatingComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}